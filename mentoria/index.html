<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>AKASHA | Protocolo Ativo</title>
    
    <!-- Fontes Premium -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Montserrat:wght@300;500&display=swap" rel="stylesheet">

    <style>
        /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê CORE & VARS ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
        :root {
            --bg: #050505;
            --gold: #D4AF37;
            --gold-dim: #5a4a1b;
            --ether: #8B5CF6;
            --font-head: 'Cinzel', serif;
            --font-body: 'Montserrat', sans-serif;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body { 
            background: var(--bg); 
            color: #fff; 
            font-family: var(--font-body); 
            overflow: hidden; 
            width: 100vw; height: 100vh;
        }

        /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê CANVAS ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
        #webgl-stage { 
            position: fixed; inset: 0; z-index: 1; 
            outline: none;
        }

        /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê UI LAYER ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
        .ui-layer {
            position: fixed; inset: 0; z-index: 10; pointer-events: none;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
        }

        /* Hero Text */
        #hero-text {
            position: absolute; top: 15%; 
            text-align: center; transition: all 1s ease;
            z-index: 20; width: 100%;
        }
        
        h1 {
            font-family: var(--font-head); 
            font-size: clamp(2.5rem, 6vw, 5rem);
            color: transparent; 
            -webkit-text-stroke: 1px var(--gold);
            text-shadow: 0 0 30px rgba(212, 175, 55, 0.3);
            letter-spacing: 0.2em; text-transform: uppercase;
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: clamp(0.7rem, 1.5vw, 1rem); 
            letter-spacing: 0.5em; color: var(--gold); 
            text-transform: uppercase; opacity: 0.8;
        }
        
        .hint {
            margin-top: 30px; font-size: 0.7rem; color: #888; letter-spacing: 0.2em;
            animation: pulse 2s infinite; pointer-events: auto; cursor: pointer;
        }

        /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê QUADRANTES (LINKS) ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
        .info-grid {
            position: absolute; width: 100%; height: 100%; pointer-events: none;
        }

        .quadrant {
            position: absolute; 
            width: 280px; 
            padding: 20px;
            background: rgba(5, 5, 5, 0.6); 
            border: 1px solid rgba(212, 175, 55, 0.2);
            backdrop-filter: blur(8px);
            opacity: 0; 
            transform: scale(0.95);
            transition: all 0.4s ease;
            cursor: pointer; /* Indica que √© clic√°vel */
        }
        
        .quadrant.active { opacity: 1; transform: scale(1); pointer-events: auto; }

        /* Hover Effect nos Quadrantes */
        .quadrant:hover {
            background: rgba(212, 175, 55, 0.1);
            border-color: var(--gold);
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(212, 175, 55, 0.2);
        }

        .quadrant h3 { 
            color: var(--gold); font-family: var(--font-head); 
            margin-bottom: 8px; font-size: 1.2rem; border-bottom: 1px solid var(--gold-dim); padding-bottom: 5px;
        }
        .quadrant p { font-size: 0.85rem; line-height: 1.6; color: #ccc; }
        .quadrant span { display: block; margin-top: 10px; font-size: 0.6rem; color: var(--ether); text-transform: uppercase; letter-spacing: 0.2em; }

        /* Posicionamento Desktop */
        #q1 { top: 20%; left: 10%; border-left: 3px solid var(--gold); }
        #q2 { top: 20%; right: 10%; text-align: right; border-right: 3px solid var(--gold); }
        #q3 { bottom: 20%; left: 10%; border-left: 3px solid var(--ether); }
        #q4 { bottom: 20%; right: 10%; text-align: right; border-right: 3px solid var(--ether); }

        /* Bot√£o CTA */
        #cta-container {
            position: absolute; bottom: 8%; 
            opacity: 0; transform: translateY(20px); transition: all 1s;
            pointer-events: none;
        }
        #cta-container.active { opacity: 1; transform: translateY(0); pointer-events: auto; }
        
        .cta-btn {
            background: rgba(212, 175, 55, 0.1); 
            border: 1px solid var(--gold); color: var(--gold);
            padding: 15px 40px; 
            font-family: var(--font-head); font-size: 1rem; letter-spacing: 0.2em;
            cursor: pointer; transition: 0.4s; text-transform: uppercase;
        }
        .cta-btn:hover { background: var(--gold); color: #000; box-shadow: 0 0 40px var(--gold-dim); }

        /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê MOBILE ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
        @media (max-width: 768px) {
            h1 { margin-top: 20px; }
            #hero-text { top: 10%; pointer-events: none; }
            
            .info-grid {
                display: flex; flex-direction: column; justify-content: flex-end; align-items: center;
                padding-bottom: 100px; gap: 10px;
            }

            .quadrant {
                position: relative; width: 90%;
                top: auto !important; left: auto !important; right: auto !important; bottom: auto !important;
                text-align: left !important;
                border: 1px solid rgba(212, 175, 55, 0.3);
                border-left: 3px solid var(--gold) !important;
                background: rgba(0,0,0,0.85);
                display: none; 
            }
            .quadrant.active { display: block; animation: slideUp 0.5s ease forwards; }
            #cta-container { bottom: 5%; width: 90%; text-align: center; }
            .cta-btn { width: 100%; padding: 12px; font-size: 0.9rem; }
        }

        @keyframes pulse { 0%, 100% { opacity: 0.4; } 50% { opacity: 1; } }
        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

    </style>
</head>
<body>

    <!-- 3D -->
    <canvas id="webgl-stage"></canvas>

    <!-- UI -->
    <div class="ui-layer">
        
        <div id="hero-text">
            <h1>Akasha</h1>
            <div class="subtitle">Arquitetura de Poder</div>
            <div class="hint" id="trigger-btn">[ TOCAR NO SISTEMA ]</div>
        </div>

        <div class="info-grid">
            <div id="q1" class="quadrant">
                <h3>01. A Funda√ß√£o</h3>
                <p>Mapeamento profundo do seu c√≥digo-fonte e prop√≥sito de marca.</p>
                <span>Diagn√≥stico</span>
            </div>

            <div id="q2" class="quadrant">
                <h3>02. A Estrutura</h3>
                <p>Constru√ß√£o da identidade visual e presen√ßa digital imersiva.</p>
                <span>Design & Tech</span>
            </div>

            <div id="q3" class="quadrant">
                <h3>03. A Energia</h3>
                <p>Alinhamento de comunica√ß√£o para atrair clientes de alta frequ√™ncia.</p>
                <span>Resson√¢ncia</span>
            </div>

            <div id="q4" class="quadrant">
                <h3>04. A Materializa√ß√£o</h3>
                <p>Estrat√©gia de lan√ßamento e consolida√ß√£o de autoridade.</p>
                <span>Escala</span>
            </div>
        </div>

        <div id="cta-container">
            <button class="cta-btn">INICIAR PROTOCOLO</button>
        </div>
    </div>

    <!-- LIBs -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

    <script>
        /**
         * AKASHA ENGINE v2.5 - CHECKOUT ENABLED
         */

        // üîó LINK DE CHECKOUT (Configure aqui)
        const CHECKOUT_URL = "https://pay.hotmart.com/I103627853C?bid=1767381877056";

        const CONFIG = {
            gold: 0xD4AF37,
            dark: 0x0a0a0a,
            neon: 0x8B5CF6,
            mobileBreak: 768
        };

        const state = {
            isOpen: false,
            isMobile: window.innerWidth < CONFIG.mobileBreak
        };

        // Fun√ß√£o de Redirecionamento
        function navigateToCheckout() {
            window.location.href = CHECKOUT_URL;
        }

        // 1. CENA
        const canvas = document.querySelector('#webgl-stage');
        const renderer = new THREE.WebGLRenderer({ canvas, antialias: true, alpha: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
        renderer.toneMapping = THREE.ReinhardToneMapping;

        const scene = new THREE.Scene();
        scene.fog = new THREE.FogExp2(0x050505, 0.02);

        const camera = new THREE.PerspectiveCamera(50, window.innerWidth / window.innerHeight, 0.1, 100);
        
        function updateCameraPosition() {
            if(window.innerWidth < 768) {
                camera.position.set(0, 2, 16);
            } else {
                camera.position.set(0, 1, 11);
            }
        }
        updateCameraPosition();

        // 2. LUZES
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.1);
        scene.add(ambientLight);

        const mainLight = new THREE.DirectionalLight(CONFIG.gold, 2);
        mainLight.position.set(5, 5, 5);
        scene.add(mainLight);

        const fillLight = new THREE.PointLight(CONFIG.neon, 1.5);
        fillLight.position.set(-5, 0, 5);
        scene.add(fillLight);

        // 3. OBJETOS
        const pyramidGroup = new THREE.Group();
        scene.add(pyramidGroup);

        const matCore = new THREE.MeshStandardMaterial({ color: 0x000000, roughness: 0.1, metalness: 0.9 });
        const matWire = new THREE.MeshBasicMaterial({ color: CONFIG.gold, wireframe: true, transparent: true, opacity: 0.15 });
        const matGlow = new THREE.MeshBasicMaterial({ color: CONFIG.neon, wireframe: true, transparent: true, opacity: 0.4, blending: THREE.AdditiveBlending });

        // Base
        const geomBase = new THREE.ConeGeometry(3, 2, 4);
        const baseMesh = new THREE.Mesh(geomBase, matCore);
        const baseWire = new THREE.Mesh(geomBase, matWire);
        baseMesh.position.y = -1.5; baseWire.position.y = -1.5; baseWire.scale.set(1.05, 1.05, 1.05);

        // Meio
        const geomMid = new THREE.ConeGeometry(2, 1.5, 4);
        const midMesh = new THREE.Mesh(geomMid, matCore);
        const midWire = new THREE.Mesh(geomMid, matWire);
        midMesh.position.y = 0.25; midWire.position.y = 0.25; midWire.scale.set(1.05, 1.05, 1.05);

        // Topo
        const geomTop = new THREE.ConeGeometry(1, 1, 4);
        const topMesh = new THREE.Mesh(geomTop, new THREE.MeshStandardMaterial({ color: CONFIG.gold, metalness: 1, roughness: 0 }));
        const topGlow = new THREE.Mesh(geomTop, matGlow);
        topMesh.position.y = 1.5; topGlow.position.y = 1.5; topGlow.scale.set(1.2, 1.2, 1.2);

        // N√∫cleo de Energia (O BOT√ÉO SECRETO)
        const coreGeo = new THREE.OctahedronGeometry(0.6, 0);
        const coreMat = new THREE.MeshBasicMaterial({ color: CONFIG.neon });
        const coreMesh = new THREE.Mesh(coreGeo, coreMat);
        coreMesh.visible = false;
        
        // Halo ao redor do n√∫cleo
        const haloGeo = new THREE.RingGeometry(0.8, 0.9, 32);
        const haloMat = new THREE.MeshBasicMaterial({ color: CONFIG.gold, side: THREE.DoubleSide, transparent: true, opacity: 0.5 });
        const halo = new THREE.Mesh(haloGeo, haloMat);
        halo.visible = false;
        coreMesh.add(halo);

        // Grupos
        const groupBase = new THREE.Group(); groupBase.add(baseMesh, baseWire);
        const groupMid = new THREE.Group(); groupMid.add(midMesh, midWire);
        const groupTop = new THREE.Group(); groupTop.add(topMesh, topGlow);

        pyramidGroup.add(groupBase);
        pyramidGroup.add(groupMid);
        pyramidGroup.add(groupTop);
        pyramidGroup.add(coreMesh);

        pyramidGroup.rotation.y = Math.PI / 4; 

        // 4. INTERA√á√ÉO E CLIQUES
        
        // A) Clique nos Quadrantes HTML
        document.querySelectorAll('.quadrant').forEach(card => {
            card.addEventListener('click', navigateToCheckout);
        });

        // B) Clique no Bot√£o CTA HTML
        document.querySelector('.cta-btn').addEventListener('click', navigateToCheckout);

        // C) Clique no Bot√£o Texto Hero
        document.getElementById('trigger-btn').addEventListener('click', toggleSystem);

        // D) L√≥gica de Clique 3D (Raycaster)
        document.addEventListener('click', (e) => {
            // Ignorar se clicou na UI HTML (pois a UI j√° tem seus eventos)
            if(e.target.closest('.quadrant') || e.target.closest('.cta-btn')) return;

            const raycaster = new THREE.Raycaster();
            const mouse = new THREE.Vector2();
            mouse.x = (e.clientX / window.innerWidth) * 2 - 1;
            mouse.y = -(e.clientY / window.innerHeight) * 2 + 1;
            
            raycaster.setFromCamera(mouse, camera);
            
            if(!state.isOpen) {
                // Se fechado, qualquer clique na pir√¢mide abre
                const intersects = raycaster.intersectObjects(scene.children, true);
                if(intersects.length > 0) toggleSystem();
            } else {
                // Se aberto, verifica se clicou no N√öCLEO
                const intersects = raycaster.intersectObject(coreMesh);
                if(intersects.length > 0) {
                    navigateToCheckout();
                }
            }
        });

        // E) Cursor Pointer no Hover do 3D
        document.addEventListener('mousemove', (e) => {
            if(state.isOpen) {
                const raycaster = new THREE.Raycaster();
                const mouse = new THREE.Vector2();
                mouse.x = (e.clientX / window.innerWidth) * 2 - 1;
                mouse.y = -(e.clientY / window.innerHeight) * 2 + 1;
                raycaster.setFromCamera(mouse, camera);

                const intersects = raycaster.intersectObject(coreMesh);
                if(intersects.length > 0) {
                    document.body.style.cursor = 'pointer';
                    coreMesh.scale.set(1.2, 1.2, 1.2); // Feedback visual
                } else {
                    document.body.style.cursor = 'default';
                    coreMesh.scale.set(1, 1, 1);
                }
            }
        });

        // 5. ANIMA√á√ÉO DE ABERTURA
        function toggleSystem() {
            if(state.isOpen) return;
            state.isOpen = true;

            const tl = gsap.timeline();

            // 3D Actions
            tl.to(groupTop.position, { y: 2.5, duration: 1.5, ease: "power4.out" }, "open");
            tl.to(groupMid.position, { y: 0.5, duration: 1.5, ease: "power4.out" }, "open");
            tl.to(groupBase.position, { y: -2.0, duration: 1.5, ease: "power4.out" }, "open");
            
            coreMesh.visible = true; halo.visible = true;
            tl.fromTo(coreMesh.scale, {x:0, y:0, z:0}, {x:1, y:1, z:1, duration: 1, ease: "back.out(2)"}, "-=1");

            tl.to(pyramidGroup.rotation, { x: 0.2, y: Math.PI / 4 + Math.PI, duration: 2 }, "open");

            if(window.innerWidth < 768) {
                tl.to(pyramidGroup.position, { y: 1.5, duration: 1 }, "open");
            }

            // UI Actions
            gsap.to('#hero-text', { opacity: 0, y: -50, duration: 0.5 });
            
            const cards = document.querySelectorAll('.quadrant');
            cards.forEach((card, i) => {
                setTimeout(() => card.classList.add('active'), 600 + (i * 200));
            });
            
            setTimeout(() => document.getElementById('cta-container').classList.add('active'), 1500);
        }

        // 6. LOOP
        const clock = new THREE.Clock();
        let mouseX = 0, mouseY = 0;
        
        document.addEventListener('mousemove', (e) => {
            mouseX = (e.clientX - window.innerWidth / 2) * 0.001;
            mouseY = (e.clientY - window.innerHeight / 2) * 0.001;
        });

        function animate() {
            requestAnimationFrame(animate);
            const time = clock.getElapsedTime();

            pyramidGroup.position.y += Math.sin(time) * 0.002;
            
            if(!state.isOpen) {
                pyramidGroup.rotation.y += 0.002;
                pyramidGroup.rotation.x += (mouseY - pyramidGroup.rotation.x) * 0.05;
                pyramidGroup.rotation.y += (mouseX - (pyramidGroup.rotation.y - (Math.PI/4 + time*0.1))) * 0.05; 
            } else {
                // N√∫cleo gira r√°pido para chamar aten√ß√£o
                coreMesh.rotation.y += 0.05;
                coreMesh.rotation.z += 0.02;
                
                // Pulsa√ß√£o do n√∫cleo
                const scale = 1 + Math.sin(time * 3) * 0.1;
                if(document.body.style.cursor !== 'pointer') { // S√≥ pulsa se n√£o estiver no hover
                     // coreMesh.scale.set(scale, scale, scale); // Comentado para n√£o conflitar com hover
                }
                
                groupTop.rotation.y = Math.sin(time) * 0.1;
                groupMid.rotation.y = Math.cos(time) * 0.1;
            }

            renderer.render(scene, camera);
        }
        animate();

        // 7. RESIZE
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
            state.isMobile = window.innerWidth < 768;
            updateCameraPosition();
        });

    </script>
</body>
</html>
